(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1dcaa990"],{"00c7":function(t,a,e){"use strict";e("e9f38")},"1e1a":function(t,a,e){"use strict";e("9ce8")},"93be":function(t,a,e){},"9ce8":function(t,a,e){},a687:function(t,a,e){"use strict";e("e31d")},bb58:function(t,a,e){"use strict";var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("aside",{staticClass:"user-sider br-1 bg-color-white"},[e("nav",{staticClass:"tc bb-1 p20"},[e("el-avatar",{attrs:{shape:"circle",size:80,src:t.avatarSrc}}),t._v(" "),e("div",{staticClass:"mt-10"},[e("strong",{staticClass:"color-black f16"},[t._v(t._s(t.userName)+" ")])])],1),t._v(" "),e("section",{directives:[{name:"loading",rawName:"v-loading",value:t.feeLoading,expression:"feeLoading"}],staticClass:"mt-20 p20"},[e("el-row",[e("el-col",{attrs:{span:21}},[e("strong",{staticClass:"f16"},[t._v("Monthly maximum expense")])]),t._v(" "),e("el-col",{attrs:{span:3,align:"right"}},[e("i",{staticClass:"el-icon-edit cp f20 color-main",on:{click:t.handleConnect}})]),t._v(" "),e("el-col",{staticClass:"mt-15",attrs:{span:24}},[e("strong",{staticClass:"f26"},[t._v("$ "+t._s(t.quotaSetting.QUOTA.val))])])],1),t._v(" "),e("el-row",{staticClass:"mt-30"},[e("el-col",{attrs:{span:21}},[e("strong",{staticClass:"f16"},[t._v("Maximum expense for a single task")])]),t._v(" "),e("el-col",{attrs:{span:3,align:"right"}},[e("i",{staticClass:"el-icon-edit cp f20 color-main",on:{click:t.handleConnect}})]),t._v(" "),e("el-col",{staticClass:"mt-15",attrs:{span:24}},[e("strong",{staticClass:"f26"},[t._v("$ "+t._s(t.quotaSetting.TASK_QUOTA.val))])])],1)],1),t._v(" "),e("ul",{staticClass:"user-sider-mean bt-1 pt-20"},[e("router-link",{attrs:{to:"/user/cost"}},[e("li",{class:t.handleActive("cost")},[t._v("\n        Billing & Cost Management\n      ")])]),t._v(" "),e("router-link",{attrs:{to:"/user/orderInvoice"}},[e("li",{class:t.handleActive("orderInvoice")},[t._v("\n        Order and invoice\n      ")])]),t._v(" "),e("router-link",{attrs:{to:"/user/personalInfo"}},[e("li",{class:t.handleActive("personalInfo")},[t._v("\n        Personal Information& credit card\n      ")])]),t._v(" "),e("router-link",{attrs:{to:"/user/accountPassword"}},[e("li",{class:t.handleActive("accountPassword")},[t._v("\n        Account and password\n      ")])])],1)])},n=[],o=e("4360"),s=e("6455"),r=e("690a"),l={name:"",components:{},props:{},data:function(){return{userName:o["a"].getters.userInfo.accountName,avatarSrc:o["a"].getters.userInfo.imagePath||r,feeLoading:!1,quotaSetting:{QUOTA:{},TASK_QUOTA:{},MAIL_TO_USER:{}}}},computed:{},watch:{},created:function(){},mounted:function(){this.getVoucher()},beforeDestroy:function(){},methods:{handleConnect:function(){this.$alert('<div class="cb">\n        <div class="fl w10">\n        <i class="el-icon-warning color-yellow f26 mr-15"></i></div>\n        <div class="fl w90">\n        <strong>Please contact the administrator if you want to change the amount limit</strong>\n        <div class="mt-10 color-red">\n        E-mail: <a href=mailto:'.concat(this.quotaSetting.MAIL_TO_USER.val,">").concat(this.quotaSetting.MAIL_TO_USER.val,"</a>\n        </div>\n        </div>\n        </div>\n        "),{confirmButtonText:"OK",center:!0,dangerouslyUseHTMLString:!0,customClass:"show-connect-info"})},handleActive:function(t){var a=this.$route.name;return a===t?"active":""},getVoucher:function(){var t=this;this.feeLoading=!0,Object(s["n"])().then((function(a){t.feeLoading=!1,200===a.code&&(t.quotaSetting=a.data)}))}}},c=l,d=(e("c120"),e("5d22")),u=Object(d["a"])(c,i,n,!1,null,null,null);a["a"]=u.exports},c120:function(t,a,e){"use strict";e("93be")},e31d:function(t,a,e){},e9f38:function(t,a,e){},fe83:function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{},[e("sider"),t._v(" "),e("article",{staticClass:"user-container bg-color-white w"},[e("nav",{staticClass:"p25 bb-1"},[e("strong",{staticClass:"f18 color-black"},[e("router-link",{staticClass:"color-main f19",attrs:{to:"/"}},[e("i",{staticClass:"mr-10 el-icon-arrow-left fb"})]),t._v("\n        Personal information\n      ")],1)]),t._v(" "),e("section",{staticClass:"mt-10 p25 w"},[e("el-form",{ref:"formData",staticClass:"user-form",attrs:{model:t.formData,"label-position":"top",size:"small","status-icon":""}},[e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.personalLoading,expression:"personalLoading"}]},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"First name",prop:"firstname"}},[e("el-input",{attrs:{type:"test",placeholder:"First name",autocomplete:"off"},model:{value:t.formData.firstname,callback:function(a){t.$set(t.formData,"firstname",a)},expression:"formData.firstname"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Last name",prop:"lastname"}},[e("el-input",{attrs:{placeholder:"Last name",type:"test",autocomplete:"off"},model:{value:t.formData.lastname,callback:function(a){t.$set(t.formData,"lastname",a)},expression:"formData.lastname"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Company name",prop:"companyName"}},[e("el-input",{attrs:{type:"test",placeholder:"Please input",autocomplete:"off"},model:{value:t.formData.companyName,callback:function(a){t.$set(t.formData,"companyName",a)},expression:"formData.companyName"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Phone Number",prop:"phoneNum"}},[e("el-input",{attrs:{placeholder:"Please input",type:"test",autocomplete:"off"},model:{value:t.formData.phoneNum,callback:function(a){t.$set(t.formData,"phoneNum",a)},expression:"formData.phoneNum"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Email",prop:"email"}},[e("el-input",{attrs:{disabled:"",placeholder:"Email",type:"test",autocomplete:"off"},model:{value:t.formData.email,callback:function(a){t.$set(t.formData,"email",a)},expression:"formData.email"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Country/Region",prop:"countryRegion"}},[e("el-select",{staticClass:"w",attrs:{filterable:"",clearable:"",placeholder:"Select and Search"},model:{value:t.formData.countryRegion,callback:function(a){t.$set(t.formData,"countryRegion",a)},expression:"formData.countryRegion"}},t._l(t.countryList,(function(t,a){return e("el-option",{key:a,attrs:{label:t,value:t}})})),1)],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Address",prop:"street"}},[e("el-input",{attrs:{placeholder:"Street，P.O.Box,Company Name,c/o",type:"test",autocomplete:"off"},model:{value:t.formData.street,callback:function(a){t.$set(t.formData,"street",a)},expression:"formData.street"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:" ",prop:"apartment"}},[e("el-input",{attrs:{placeholder:"Apartment,suite,unit,building,floor,etc",type:"test",autocomplete:"off"},model:{value:t.formData.apartment,callback:function(a){t.$set(t.formData,"apartment",a)},expression:"formData.apartment"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"City",prop:"city"}},[e("el-input",{attrs:{placeholder:"Please input",type:"test",autocomplete:"off"},model:{value:t.formData.city,callback:function(a){t.$set(t.formData,"city",a)},expression:"formData.city"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"State/Province or region",prop:"state"}},[e("el-input",{attrs:{placeholder:"Please input",type:"test",autocomplete:"off"},model:{value:t.formData.state,callback:function(a){t.$set(t.formData,"state",a)},expression:"formData.state"}})],1)],1),t._v(" "),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Postal Code",prop:"postalCode"}},[e("el-input-number",{attrs:{controls:!1,placeholder:"Please input"},model:{value:t.formData.postalCode,callback:function(a){t.$set(t.formData,"postalCode",a)},expression:"formData.postalCode"}})],1)],1)],1),t._v(" "),e("el-form-item",{staticClass:"mt-40 mb-50 disinblock"},[e("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(a){return t.submitForm("formData")}}},[t._v("Confirm")]),t._v(" "),e("el-button",{on:{click:function(a){return t.resetForm("formData")}}},[t._v("Reset")])],1)],1),t._v(" "),e("el-divider"),t._v(" "),e("nav",{staticClass:"mt-40"},[e("el-row",{staticClass:"w"},[e("el-col",{attrs:{span:16}},[e("strong",{staticClass:"color-black f15"},[t._v("Credit Card")])])],1)],1),t._v(" "),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.cardLoading,expression:"cardLoading"}]},[e("el-row",{staticClass:"user-card-content",attrs:{gutter:20}},[t._l(t.cardList,(function(a,i){return e("el-col",{key:i,staticClass:"mt-20 user-card-item",attrs:{span:12}},[e("el-form-item",[e("el-card",{staticClass:"user-card",attrs:{shadow:"hover","body-style":{padding:"0"}}},[e("el-row",{staticClass:"p15",attrs:{gutter:10}},[e("el-col",{attrs:{span:16}},[e("strong",[t._v(t._s(a.cardType))])]),t._v(" "),e("el-col",{attrs:{span:8,align:"right"}},[a.defaultPayment?e("small",{staticClass:"user-card-defult"},[t._v("defult")]):t._e()])],1),t._v(" "),e("div",{staticClass:"user-card-line"}),t._v(" "),e("div",{staticClass:"user-card-chip"},[e("span",[t._v("CREDIT")])]),t._v(" "),e("div",{staticClass:"f16 colof-white p15"},[t._v("\n                    •••• •••• •••• "+t._s(a.last4)+"\n                  ")]),t._v(" "),e("div",{staticClass:"operation-content"},[e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Delete card",placement:"top"}},[e("el-button",{attrs:{type:"danger",circle:"",icon:"el-icon-delete"},on:{click:function(e){return t.deleteCard(a)}}})],1),t._v(" "),e("el-tooltip",{staticClass:"item",attrs:{effect:"dark",content:"Set default",placement:"top"}},[e("el-button",{attrs:{type:"primary",circle:"",icon:"el-icon-star-off"},on:{click:function(e){return t.setDefultPayment(a,i)}}})],1)],1)],1)],1)],1)})),t._v(" "),e("el-col",{staticClass:"mt-20",attrs:{span:12}},[e("el-form-item",[e("el-card",{staticClass:"card-add-btn cp",attrs:{shadow:"hover"},nativeOn:{click:function(a){return t.handleAddCard(a)}}},[e("div",{staticClass:"tc mt-50"},[e("i",{staticClass:"el-icon-circle-plus-outline f22"})]),t._v(" "),e("div",{staticClass:"tc color-gray card-add-btn-text"},[t._v("\n                    Add bank card\n                  ")])])],1)],1)],2)],1)],1)],1)]),t._v(" "),e("add-card",{ref:"addCardRef",on:{"get-card":t.getCardList}}),t._v(" "),e("upload-avatar",{ref:"uploadAvatarRef",on:{"get-avatar":t.getAvatar}})],1)},n=[],o=e("4360"),s=e("bb58"),r=function(){var t=this,a=t.$createElement,e=t._self._c||a;return t.dialogVisible?e("el-dialog",{attrs:{title:t.editStatus?"Edit credit card":"Add credit card",align:"center",visible:t.dialogVisible,"close-on-click-modal":!1,width:"40%"},on:{"update:visible":function(a){t.dialogVisible=a},close:t.resetForm}},[e("el-form",{directives:[{name:"loading",rawName:"v-loading",value:t.pageLoading,expression:"pageLoading"}],ref:"dialogForm",staticClass:"tl mt-30",attrs:{model:t.dialogForm,"label-position":"top",size:"small","status-icon":""}},[e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:24}},[e("el-form-item",{attrs:{label:"Card Number",prop:"cardNumber",rules:[{required:!0,message:"Please input legal bank card number"}]}},[e("stripe-save-card",{ref:"stripeSaveCard",on:{"complate-card":t.complateCard}})],1)],1)],1),t._v(" "),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{label:"Default payment",prop:"defaultPayment"}},[e("el-switch",{attrs:{"active-value":1,"inactive-value":0},model:{value:t.dialogForm.defaultPayment,callback:function(a){t.$set(t.dialogForm,"defaultPayment",a)},expression:"dialogForm.defaultPayment"}})],1)],1)],1),t._v(" "),e("div",{staticClass:"mt-40 mb-20 tc"},[e("el-button",{attrs:{size:"small"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{size:"small",loading:t.btnLoading,type:"primary"},on:{click:function(a){return t.submitForm("dialogForm")}}},[t._v("Confirm")])],1)],1)],1):t._e()},l=[],c=e("6455"),d=["01","02","03","04","05","06","07","08","09","10","11","12"],u=h();function h(){for(var t=[],a=20,e=0;e<80;e++)t.push(String(a+e));return t}var m=["Afghanistan","Aland Islands","Albania","Algeria","American Samoa","Andorra","Angola","Anguilla","Antarctica","Antigua and Barbuda","Argentina","Armenia","Aruba","Australia","Austria","Azerbaijan","Bahamas, The","Bahrain","Bangladesh","Barbados","Belarus","Belgium","Belize","Benin","Bermuda","Bhutan","Bolivia","Bonaire, Saint Eustatius and Saba","Bosnia and Herzegovina","Botswana","Bouvet Island","Brazil","British Indian Ocean Territory","Brunei Darussalam","Bulgaria","Burkina Faso","Burundi","Cambodia","Cameroon","Canada","Cape Verde","Cayman Islands","Central African Republic","Chad","Chile","China","Christmas Island","Cocos (Keeling) Islands","Colombia","Comoros","Congo","Congo, The Democratic Republic of the","Cook Islands","Costa Rica","Cote D'ivoire","Croatia","Curaçao","Cyprus","Czech Republic","Denmark","Djibouti","Dominica","Dominican Republic","Ecuador","Egypt","El Salvador","Equatorial Guinea","Eritrea","Estonia","Ethiopia","Falkland Islands (Malvinas)","Faroe Islands","Fiji","Finland","France","French Guiana","French Polynesia","French Southern Territories","Gabon","Gambia, The","Georgia","Germany","Ghana","Gibraltar","Greece","Greenland","Grenada","Guadeloupe","Guam","Guatemala","Guernsey","Guinea","Guinea-Bissau","Guyana","Haiti","Heard Island and the McDonald Islands","Holy See","Honduras","Hong Kong","Hungary","Iceland","India","Indonesia","Iraq","Ireland","Isle of Man","Israel","Italy","Jamaica","Japan","Jersey","Jordan","Kazakhstan","Kenya","Kiribati","Korea, Republic of","Kosovo, Republic of","Kuwait","Kyrgyzstan","Lao People's Democratic Republic","Latvia","Lebanon","Lesotho","Liberia","Libya","Liechtenstein","Lithuania","Luxembourg","Macao","Macedonia, The Former Yugoslav Republic of","Madagascar","Malawi","Malaysia","Maldives","Mali","Malta","Marshall Islands","Martinique","Mauritania","Mauritius","Mayotte","Mexico","Micronesia, Federated States of","Moldova, Republic of","Monaco","Mongolia","Montenegro","Montserrat","Morocco","Mozambique","Myanmar","Namibia","Nauru","Nepal","Netherlands","New Caledonia","New Zealand","Nicaragua","Niger","Nigeria","Niue","Norfolk Island","Northern Mariana Islands","Norway","Oman","Pakistan","Palau","Palestinian Territories","Panama","Papua New Guinea","Paraguay","Peru","Philippines","Pitcairn","Poland","Portugal","Puerto Rico","Qatar","Reunion","Romania","Russian Federation","Rwanda","Saint Barthelemy","Saint Helena, Ascension and Tristan da Cunha","Saint Kitts and Nevis","Saint Lucia","Saint Martin","Saint Pierre and Miquelon","Saint Vincent and the Grenadines","Samoa","San Marino","Sao Tome and Principe","Saudi Arabia","Senegal","Serbia","Seychelles","Sierra Leone","Singapore","Sint Maarten","Slovakia","Slovenia","Solomon Islands","Somalia","South Africa","South Georgia and the South Sandwich Islands","South Sudan","Spain","Sri Lanka","Suriname","Svalbard and Jan Mayen","Swaziland","Sweden","Switzerland","Taiwan","Tajikistan","Tanzania, United Republic of","Thailand","Timor-leste","Togo","Tokelau","Tonga","Trinidad and Tobago","Tunisia","Turkey","Turkmenistan","Turks and Caicos Islands","Tuvalu","Uganda","Ukraine","United Arab Emirates","United Kingdom","United States","United States Minor Outlying Islands","Uruguay","Uzbekistan","Vanuatu","Venezuela","Vietnam","Virgin Islands, British","Virgin Islands, U.S.","Wallis and Futuna","Western Sahara","Yemen","Zambia","Zimbabwe"],f={name:"",components:{},props:{},data:function(){return{countryList:m,dialogVisible:!1,editStatus:!1,pageLoading:!1,btnLoading:!1,monthList:d,yearList:u,expirationMonth:"",expirationYear:"",dialogForm:{cardNumber:"",firstname:"",lastname:"",expirationDate:"",securityCode:"",countryRegion:"",address:"",city:"",state:"",defaultPayment:1,userId:o["a"].getters.userInfo.userId}}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{complateCard:function(t){var a=this;if(this.btnLoading=!1,this.dialogForm.defaultPayment){var e={id:t.payment_method};this.cardLoading=!0,Object(c["q"])(e).then((function(t){a.cardLoading=!1,200===t.code&&(a.dialogVisible=!1,a.$emit("get-card"))})).catch((function(){a.cardLoading=!1}))}else this.dialogVisible=!1,this.$emit("get-card")},openDialog:function(t){var a=this;this.dialogVisible=!0,this.editStatus=!1,t&&(this.editStatus=!0,this.pageLoading=!0,Object(c["f"])(t.customerPaymentProfileId).then((function(t){a.pageLoading=!1,a.dialogForm=t.data,a.dialogForm.cardNumber="".concat(t.data.cardNumber),a.dialogForm.securityCode="●●●●"})))},submitForm:function(t){this.btnLoading=!0,this.$refs.stripeSaveCard.submitCard()},resetForm:function(t){Object.assign(this.$data,this.$options.data())}}},g=f,p=e("5d22"),v=Object(p["a"])(g,r,l,!1,null,"55e36dac",null),b=v.exports,y=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("el-dialog",{attrs:{title:"Upload Avatar","custom-class":"upload-avatar",visible:t.dialogVisible,width:"600px",align:"center"},on:{"update:visible":function(a){t.dialogVisible=a}}},[e("section",{staticClass:"tc"},[e("div",{staticClass:"cb disinblock"},[e("vue-avatar",{ref:"vueavatar",staticClass:"fl",attrs:{width:300,height:300,rotation:t.rotation,scale:t.scale},on:{"vue-avatar-editor:image-ready":t.onImageReady}})],1),t._v(" "),e("div",{staticClass:"tc"},[e("el-slider",{staticClass:"disinblock upload-avatar-scale",attrs:{min:1,max:3,step:.02},model:{value:t.scale,callback:function(a){t.scale=a},expression:"scale"}})],1)]),t._v(" "),e("div",{staticClass:"mt-20 mb-20"},[e("el-button",{attrs:{size:"small"},on:{click:function(a){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),e("el-button",{attrs:{size:"small",type:"primary",loading:t.btnLoading},on:{click:t.confirmAvatar}},[t._v("Confirm")])],1)])},w=[],C=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("canvas",{ref:"avatarEditorCanvas",staticClass:"cursorPointer",attrs:{width:t.canvasWidth,height:t.canvasHeight,id:"avatarEditorCanvas"},on:{dragover:function(t){t.preventDefault()},drop:t.onDrop,mousedown:t.onDragStart,touchstart:t.onDragStart,click:t.clicked}}),t._v(" "),e("input",{ref:"input",staticStyle:{display:"none"},attrs:{type:"file",accept:t.accept},on:{change:t.fileSelected}})])},_=[];function D(t,a){return M(t)||I(t,a)||x(t,a)||S()}function S(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(t,a){if(t){if("string"===typeof t)return L(t,a);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?L(t,a):void 0}}function L(t,a){(null==a||a>t.length)&&(a=t.length);for(var e=0,i=new Array(a);e<a;e++)i[e]=t[e];return i}function I(t,a){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t)){var e=[],i=!0,n=!1,o=void 0;try{for(var s,r=t[Symbol.iterator]();!(i=(s=r.next()).done);i=!0)if(e.push(s.value),a&&e.length===a)break}catch(l){n=!0,o=l}finally{try{i||null==r["return"]||r["return"]()}finally{if(n)throw o}}return e}}function M(t){if(Array.isArray(t))return t}var P={props:{image:{type:String,default:""},accept:{type:String,default:"image/*"},placeholderSvg:{type:String,default:'<svg id="Layer_1" data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 65 65"><defs><style>.cls-1{fill:#000;}</style></defs><title>Upload_Upload</title><path class="cls-1" d="M32.5,1A31.5,31.5,0,1,1,1,32.5,31.54,31.54,0,0,1,32.5,1m0-1A32.5,32.5,0,1,0,65,32.5,32.5,32.5,0,0,0,32.5,0h0Z"/><polygon class="cls-1" points="41.91 28.2 32.59 18.65 23.09 28.39 24.17 29.44 31.87 21.54 31.87 40.05 33.37 40.05 33.37 21.59 40.83 29.25 41.91 28.2"/><polygon class="cls-1" points="40.66 40.35 40.66 44.35 24.34 44.35 24.34 40.35 22.34 40.35 22.34 44.35 22.34 46.35 24.34 46.35 40.66 46.35 42.66 46.35 42.66 44.35 42.66 40.35 40.66 40.35"/></svg>'},border:{type:Number,default:25},borderRadius:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},color:{type:Array,default:function(){return[0,0,0,.5]}},scale:{type:Number,default:1},rotation:{type:Number,default:0}},data:function(){return{cursor:"cursorPointer",canvas:null,context:null,dragged:!1,imageLoaded:!1,changed:!1,state:{drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}}}},computed:{canvasWidth:function(){return this.getDimensions().canvas.width},canvasHeight:function(){return this.getDimensions().canvas.height},rotationRadian:function(){return this.rotation*Math.PI/180}},mounted:function(){var t=this;if(this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),this.paint(),this.image)this.loadImage(this.image);else{var a=this.svgToImage(this.placeholderSvg);a.onload=function(){var e=t.canvasWidth/2-this.width/2,i=t.canvasHeight/2-this.height/2;t.context.drawImage(a,e,i,this.width,this.height)}}},methods:{drawRoundedRect:function(t,a,e,i,n,o){if(0===o)t.rect(a,e,i,n);else{var s=i-o,r=n-o;t.translate(a,e),t.arc(o,o,o,Math.PI,1.5*Math.PI),t.lineTo(s,0),t.arc(s,o,o,1.5*Math.PI,2*Math.PI),t.lineTo(i,r),t.arc(s,r,o,2*Math.PI,.5*Math.PI),t.lineTo(o,n),t.arc(o,r,o,.5*Math.PI,Math.PI),t.translate(-a,-e)}},svgToImage:function(t){var a=new Blob([t],{type:"image/svg+xml;charset=utf-8"}),e=self.URL||self.webkitURL||self,i=e.createObjectURL(a),n=new Image;return n.src=i,n},setState:function(t){var a=Math.ceil(1),e=Math.floor(1e4);this.state=t,this.state.cnt="HELLO"+Math.floor(Math.random()*(e-a))+a},paint:function(){this.context.save(),this.context.translate(0,0),this.context.fillStyle="rgba("+this.color.slice(0,4).join(",")+")";var t=this.borderRadius,a=this.getDimensions(),e=a.border,i=a.canvas.height,n=a.canvas.width;t=Math.max(t,0),t=Math.min(t,n/2-e,i/2-e),this.context.beginPath(),this.drawRoundedRect(this.context,e,e,n-2*e,i-2*e,t),this.context.rect(n,0,-n,i),this.context.fill("evenodd"),this.context.restore()},getDimensions:function(){return{width:this.width,height:this.height,border:this.border,canvas:{width:this.width+2*this.border,height:this.height+2*this.border}}},onDrop:function(t){var a=this;if(t=t||window.event,t.stopPropagation(),t.preventDefault(),t.dataTransfer&&t.dataTransfer.files.length){var e=new FileReader,i=t.dataTransfer.files[0];this.changed=!0,e.onload=function(t){return a.loadImage(t.target.result)},e.readAsDataURL(i)}},onDragStart:function(t){var a=this;t=t||window.event,t.preventDefault(),this.state.drag=!0,this.state.mx=null,this.state.my=null,this.cursor="cursorGrabbing";var e=document,i=!1,n=function n(s){a.onDragEnd(s),!i&&s.targetTouches&&t.target.click(),e.removeEventListener("mouseup",n),e.removeEventListener("mousemove",o),e.removeEventListener("touchend",n),e.removeEventListener("touchmove",o)},o=function(t){i=!0,a.onMouseMove(t)};e.addEventListener("mouseup",n),e.addEventListener("mousemove",o),e.addEventListener("touchend",n),e.addEventListener("touchmove",o)},onDragEnd:function(t){this.state.drag&&(this.state.drag=!1,this.cursor="cursorPointer")},onMouseMove:function(t){if(t=t||window.event,!1!==this.state.drag){this.dragged=!0,this.changed=!0;var a=this.state.image,e=a.x,i=a.y,n=t.targetTouches?t.targetTouches[0].pageX:t.clientX,o=t.targetTouches?t.targetTouches[0].pageY:t.clientY,s={mx:n,my:o,image:a};if(this.state.mx&&this.state.my){var r=(this.state.mx-n)/this.scale,l=(this.state.my-o)/this.scale;a.y=this.getBoundedY(i-l,this.scale),a.x=this.getBoundedX(e-r,this.scale)}this.state.mx=s.mx,this.state.my=s.my,this.state.image=a}},replaceImageInBounds:function(){var t=this.state.image;t.y=this.getBoundedY(t.y,this.scale),t.x=this.getBoundedX(t.x,this.scale)},loadImage:function(t){var a=this,e=new Image,i=this;e.onload=function(){var t=i.getInitialSize(e.width,e.height);i.state.image.x=0,i.state.image.y=0,i.state.image.resource=e,i.state.image.width=t.width,i.state.image.height=t.height,i.state.drag=!1,i.$emit("vue-avatar-editor:image-ready",i.scale),i.imageLoaded=!0,a.$emit("imageLoaded",i.imageLoaded),i.cursor="cursorGrab"},e.onerror=function(t){},this.isDataURL(t)||(e.crossOrigin="anonymous"),e.src=t},getInitialSize:function(t,a){var e,i,n=this.getDimensions(),o=n.height/n.width,s=a/t;return o>s?(e=this.getDimensions().height,i=t*(e/a)):(i=this.getDimensions().width,e=a*(i/t)),{height:e,width:i}},isDataURL:function(t){return null!==t&&!!t.match(/^\s*data:([a-z]+\/[a-z]+(;[a-z\-]+=[a-z\-]+)?)?(;base64)?,[a-z0-9!$&',()*+;=\-._~:@\/?%\s]*\s*$/i)},getBoundedX:function(t,a){var e=this.state.image,i=this.getDimensions(),n=Math.abs(e.width*Math.cos(this.rotationRadian))+Math.abs(e.height*Math.sin(this.rotationRadian)),o=Math.floor((n-i.width/a)/2);return o=Math.max(0,o),Math.max(-o,Math.min(t,o))},getBoundedY:function(t,a){var e=this.state.image,i=this.getDimensions(),n=Math.abs(e.width*Math.sin(this.rotationRadian))+Math.abs(e.height*Math.cos(this.rotationRadian)),o=Math.floor((n-i.height/a)/2);return o=Math.max(0,o),Math.max(-o,Math.min(t,o))},paintImage:function(t,a,e){if(a.resource){var i=this.calculatePosition(a,e);t.save(),t.globalCompositeOperation="destination-over";var n=this.getDimensions();t.translate(n.canvas.width/2,n.canvas.height/2),t.rotate(this.rotationRadian),t.translate(-n.canvas.width/2,-n.canvas.height/2),t.drawImage(a.resource,i.x,i.y,i.width,i.height),t.restore()}},transformDataWithRotation:function(t,a){var e=-this.rotationRadian,i=t*Math.cos(e)-a*Math.sin(e),n=t*Math.sin(e)+a*Math.cos(e);return[i,n]},calculatePosition:function(t,a){t=t||this.state.image;var e=this.getDimensions(),i=t.width*this.scale,n=t.height*this.scale,o=(i-e.width)/2,s=(n-e.height)/2,r=t.x*this.scale,l=t.y*this.scale,c=this.transformDataWithRotation(r,l),d=D(c,2);return r=d[0],l=d[1],r+=a-o,l+=a-s,{x:r,y:l,height:n,width:i}},redraw:function(){this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint(),this.paintImage(this.context,this.state.image,this.border)},getImage:function(){var t=this.getCroppingRect(),a=this.state.image;t.x*=a.resource.width,t.y*=a.resource.height,t.width*=a.resource.width,t.height*=a.resource.height;var e=document.createElement("canvas");return e.width=t.width,e.height=t.height,e.getContext("2d").drawImage(a.resource,-t.x,-t.y),e},getImageScaled:function(){var t=this.getDimensions(),a=t.width,e=t.height,i=document.createElement("canvas");return i.width=a,i.height=e,this.paintImage(i.getContext("2d"),this.state.image,0),i},imageChanged:function(){return this.changed},getCroppingRect:function(){var t=this.getDimensions(),a={x:t.border,y:t.border,width:t.width,height:t.height},e=this.calculatePosition(this.state.image,t.border);return{x:(a.x-e.x)/e.width,y:(a.y-e.y)/e.height,width:a.width/e.width,height:a.height/e.height}},clicked:function(t){!0===this.dragged?this.dragged=!1:this.$refs.input.click()},fileSelected:function(t){var a=this,e=t.target.files||t.dataTransfer.files;if(this.$emit("select-file",e),e.length){var i=new FileReader;this.changed=!0,i.onload=function(t){return a.loadImage(t.target.result)},i.readAsDataURL(e[0])}},resetImage:function(){var t=this;this.canvas=this.$refs.avatarEditorCanvas,this.context=this.canvas.getContext("2d"),t.imageLoaded=!1,this.$emit("imageLoaded",t.imageLoaded),t.state={drag:!1,my:null,mx:null,xxx:"ab",image:{x:0,y:0,resource:null}},this.context.clearRect(0,0,this.getDimensions().canvas.width,this.getDimensions().canvas.height),this.paint();var a=this.svgToImage(this.placeholderSvg);a.onload=function(){var e=t.canvasWidth/2-this.width/2,i=t.canvasHeight/2-this.height/2;t.context.drawImage(a,e,i,this.width,this.height)}}},watch:{state:{handler:function(t,a){this.imageLoaded&&this.redraw()},deep:!0},scale:function(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},rotation:function(){this.imageLoaded&&(this.replaceImageInBounds(),this.redraw())},borderRadius:function(){this.redraw()}}},R=P,k=(e("00c7"),Object(p["a"])(R,C,_,!1,null,null,null)),A=k.exports,T=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",[e("vue-avatar",{ref:"vueavatar",attrs:{width:t.width,height:t.height,rotation:t.rotation,borderRadius:t.borderRadius,border:t.border,color:t.color,scale:t.scale},on:{"vue-avatar-editor:image-ready":t.onImageReady,"select-file":function(a){return t.onSelectFile(a)}}}),t._v(" "),e("br"),t._v(" "),t.hasScale?e("label",[t._v("\n    Zoom : "+t._s(t.scale)+"x\n    "),e("br"),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.scale,expression:"scale"}],attrs:{type:"range",min:"1",max:"3",step:"0.02"},domProps:{value:t.scale},on:{__r:function(a){t.scale=a.target.value}}})]):t._e(),t._v(" "),e("br"),t._v(" "),t.hasRotation?e("label",[t._v("\n    Rotation : "+t._s(t.rotation)+"°\n    "),e("br"),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.rotation,expression:"rotation"}],attrs:{type:"range",min:"0",max:"360",step:"1"},domProps:{value:t.rotation},on:{__r:function(a){t.rotation=a.target.value}}})]):t._e(),t._v(" "),e("br"),t._v(" "),e("button",{on:{click:t.finished}},[t._v(t._s(t.finishText))])],1)},$=[],O={props:{finishText:{type:String,default:"Save"},hasRotation:{type:Boolean,default:!0},hasScale:{type:Boolean,default:!0},image:{type:String,default:""},border:{type:Number,default:25},borderRadius:{type:Number,default:0},width:{type:Number,default:200},height:{type:Number,default:200},color:{type:Array,default:function(){return[0,0,0,.5]}}},data:function(){return{rotation:0,scale:1}},components:{VueAvatar:A},methods:{onSelectFile:function(t){this.$emit("select-file",t)},onImageReady:function(){this.scale=1,this.rotation=0},finished:function(){return this.$emit("finished",this.$refs.vueavatar.getImageScaled())}}},N=O,B=Object(p["a"])(N,T,$,!1,null,null,null),E=(B.exports,e("f753")),F=e.n(E),j=e("caaf"),U=e.n(j),z=e("c24f"),V={name:"",components:{VueAvatar:A},props:{},data:function(){return{dialogVisible:!1,btnLoading:!1,s3Data:{},rotation:0,scale:1}},computed:{},watch:{},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{confirmAvatar:function(){var t=this,a=this.$refs.vueavatar.getImageScaled();a.toBlob((function(a){t.btnLoading=!0;var e={bizData:{},fileName:"avatar_".concat(U()().format("YY_MM_DD_HH_mm_ss"),".png"),type:"avatar",uuid:""};Object(z["b"])(e).then((function(e){if(200===e.code){t.s3Data=e.data;var i="http://melaxtechinput.s3.amazonaws.com",n=new window.File([a],"avatar",{type:"image/png"}),o=new FormData;for(var s in t.s3Data)o.append(s,t.s3Data[s]);o.append("file",n),F.a.post(i,o,{headers:{"Content-Type":"multipart/form-data"}}).then((function(a){t.btnLoading=!1;var e=a.data;200===e.code&&(t.$message.success("Upload success."),setTimeout((function(){location.reload()}),800))}))}})).catch((function(){t.btnLoading=!1}))}))},openDialog:function(){this.dialogVisible=!0},saveClicked:function(){var t=this.$refs.vueavatar.getImageScaled();this.$refs.image.src=t.toDataURL()},onImageReady:function(){this.scale=1,this.rotation=0},resetData:function(){Object.assign(this.$data,this.$options.data())}}},G=V,H=(e("1e1a"),Object(p["a"])(G,y,w,!1,null,null,null)),q=H.exports;function K(t,a){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(t,a).enumerable}))),e.push.apply(e,i)}return e}function Y(t){for(var a=1;a<arguments.length;a++){var e=null!=arguments[a]?arguments[a]:{};a%2?K(Object(e),!0).forEach((function(a){W(t,a,e[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):K(Object(e)).forEach((function(a){Object.defineProperty(t,a,Object.getOwnPropertyDescriptor(e,a))}))}return t}function W(t,a,e){return a in t?Object.defineProperty(t,a,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[a]=e,t}var J=e("690a"),Q={name:"",components:{Sider:s["a"],addCard:b,UploadAvatar:q},props:{},data:function(){return{dateData:[],countryList:m,avatarSrc:o["a"].getters.userInfo.imagePath||J,btnLoading:!1,personalLoading:!1,cardLoading:!1,cardList:[],formData:{userId:o["a"].getters.userInfo.userId,imagePath:"",firstname:"",lastname:"",companyName:"",phoneNum:"",email:o["a"].getters.userInfo.email,countryRegion:"",areaCode:"",street:"",city:"",state:"",postalCode:null}}},computed:{},watch:{},created:function(){},mounted:function(){this.getUserInfo(),this.getCardList()},beforeDestroy:function(){},methods:{copySuccess:function(){this.$message.success("Copy success!")},handleEdit:function(t){this.$refs.addCardRef.openDialog(t)},deleteCard:function(t){var a=this;this.$confirm("Are you sure to delete?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){var e={id:t.id};a.cardLoading=!0,Object(c["c"])(e).then((function(t){a.cardLoading=!1,200===t.code&&(a.$message.success(t.message),a.getCardList())})).catch((function(){a.cardLoading=!1}))})).catch((function(){a.cardLoading=!1}))},setDefultPayment:function(t){var a=this;this.$confirm("Set this card as default?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){var e={id:t.id};a.cardLoading=!0,Object(c["q"])(e).then((function(t){a.cardLoading=!1,200===t.code&&(a.$message.success(t.message),a.getCardList())})).catch((function(){a.cardLoading=!1}))})).catch((function(){}))},getCardList:function(){var t=this,a=o["a"].getters.userInfo.userId;this.cardLoading=!0,Object(c["g"])(a).then((function(a){t.cardLoading=!1,200===a.code&&(t.cardList=a.data)})).catch((function(){t.cardLoading=!1}))},getUserInfo:function(){var t=this;this.personalLoading=!0,Object(c["o"])().then((function(a){t.formData=a.data,t.personalLoading=!1})).catch((function(){t.personalLoading=!1}))},getAvatar:function(t,a){this.avatarSrc=a,this.formData.imagePath=t},editAvatar:function(){this.$refs.uploadAvatarRef.openDialog()},handleAddCard:function(){this.$refs.addCardRef.openDialog()},openBillDetail:function(){this.$router.push("/user/billDetail")},submitForm:function(t){var a=this;this.$refs[t].validate((function(t){if(!t)return!1;var e=Y({},a.formData);a.btnLoading=!0,Object(c["a"])(e).then((function(t){a.btnLoading=!1,t.success&&(a.$message.success(t.msg),setTimeout((function(){location.reload()}),800))})).catch((function(){a.btnLoading=!1}))}))},resetForm:function(t){this.$refs[t].resetFields()}}},X=Q,Z=(e("a687"),Object(p["a"])(X,i,n,!1,null,"cf35a5d0",null));a["default"]=Z.exports}}]);
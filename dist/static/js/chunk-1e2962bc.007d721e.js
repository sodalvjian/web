(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1e2962bc"],{2232:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("nav",{staticClass:"vital-container cb"},[a("strong",{staticClass:"fl nav-title mt-10 f16"},[e._v("Patient List")]),e._v(" "),a("div",{staticClass:"fr"},[a("el-select",{staticClass:"radius-input mr-15",attrs:{size:"medium",clearable:"",placeholder:"Please select type"},model:{value:e.queryData.type,callback:function(t){e.$set(e.queryData,"type",t)},expression:"queryData.type"}},e._l(e.typeOptions,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),e._v(" "),a("el-input",{staticClass:"radius-input search-input mr-15",attrs:{size:"medium",clearable:"",placeholder:"Please enter the keyword"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.queryData.keyword,callback:function(t){e.$set(e.queryData,"keyword",t)},expression:"queryData.keyword"}},[a("i",{staticClass:"el-input__icon el-icon-search cp",attrs:{slot:"suffix",title:"Search"},on:{click:e.handleSearch},slot:"suffix"})]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium",round:"",plain:""},on:{click:e.enterSharedRecord}},[a("i",{staticClass:"el-icon-share mr-5"}),e._v("Shared record")]),e._v(" "),a("el-button",{attrs:{type:"primary",size:"medium",round:""},on:{click:e.uploadData}},[a("i",{staticClass:"el-icon-upload2 el-icon--left mr-5"}),e._v("Upload")])],1)]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.selectShow,expression:"selectShow"}],staticClass:"mt-20 vital-container select-center radius5 color-black f15"},[a("span",{staticClass:"mr-20 cp",on:{click:function(t){return e.shareData(!1)}}},[a("i",{staticClass:"el-icon-share mr-5"}),e._v("Share")]),e._v(" "),a("span",{staticClass:"mr-20 cp",on:{click:function(t){return e.deleteData(!1)}}},[a("i",{staticClass:"el-icon-delete mr-5"}),e._v("Delete")])]),e._v(" "),a("section",{staticClass:"mt-20 vital-container"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData},on:{"selection-change":e.handleSelectionChange,"row-click":e.viewPatient}},[a("no-data-table",{attrs:{slot:"empty"},slot:"empty"}),e._v(" "),a("el-table-column",{attrs:{type:"selection",align:"center",width:"45"}}),e._v(" "),a("el-table-column",{attrs:{type:"index",label:"NO.",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"Name",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{label:"Description","min-width":"190"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.desc?t.row.desc:"--")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"type",label:"Type",width:"90"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPhenoTypes",align:"center",label:"Phenotype",width:"100"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalPatients",align:"center",label:"Patient Count",width:"120"}}),e._v(" "),a("el-table-column",{attrs:{label:"Owner",align:"center",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(t.row.sourceUser?t.row.sourceUser.name:"--")+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"Created",label:"Created",width:"155"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n          "+e._s(e._f("setHourDate")(t.row.create))+"\n        ")]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"Operation",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("i",{staticClass:"el-icon-share color-main cp mr-10",attrs:{title:"Share"},on:{click:function(a){return a.stopPropagation(),e.shareData(t.row)}}}),e._v(" "),a("i",{staticClass:"iconfont icon-shanchu color-red cp",attrs:{title:"Delete"},on:{click:function(a){return a.stopPropagation(),e.deleteData(t.row)}}})]}}])})],1),e._v(" "),a("div",{staticClass:"tr mt-20"},[a("el-pagination",{attrs:{"current-page":e.page,"hide-on-single-page":!0,"page-size":e.pageSize,background:"",layout:"total,prev, pager, next, jumper",total:e.total},on:{"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("upload-module",{ref:"uploadModule",on:{getList:e.getData}}),e._v(" "),a("share-module",{ref:"shareModule",attrs:{"shart-list":e.shartList}})],1)},s=[],n=a("b775");function o(e,t){return Object(n["a"])({url:"api/patientList/".concat(e.page,"/").concat(e.size),method:"POST",data:t})}function l(e){return Object(n["a"])({url:"api/patientList?ids=".concat(e.id),method:"DELETE"})}var r=a("f9ea"),c=a("5f3e"),u=a("f753"),d=a.n(u),p={components:{uploadModule:r["a"],shareModule:c["a"]},data:function(){return{baseUrl:"/clampee",loading:!1,total:0,page:1,pageSize:10,selectShow:!1,shartList:[],queryData:{type:""},tableData:[],typeOptions:[{label:"private",value:"private"},{label:"share",value:"share"}]}},computed:{},watch:{},created:function(){},mounted:function(){this.getData()},methods:{handleSearch:function(){this.page=1,this.getData()},handleCurrentChange:function(e){this.page=e,this.getData()},exportPart:function(){if(this.multipleSelection.length>0){var e="".concat(this.baseUrl,"/api/search/phenotypeSearchDownload/").concat(this.patientListId);d.a.defaults.headers.Authorization="Bearer "+this.$store.getters.token,d.a.get(e,{responseType:"blob"}).then((function(e){var t=new Blob([e.data],{type:"text/csv,charset=UTF-8"}),a=document.createElement("a"),i=window.URL.createObjectURL(t);a.href=i,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i)}))}else this.$message.error("Please select")},deleteData:function(e){var t=this;e?this.$confirm("Confirm delete?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){var a={id:e.id};l(a).then((function(e){200===e.code?(t.$message.success(e.message),t.getData()):t.$message.error(e.message)}))})).catch((function(){})):this.$confirm("Confirm delete?",{confirmButtonText:"Confirm",cancelButtonText:"Cancel",type:"warning"}).then((function(){var e=t.multipleSelection.map((function(e){return e.id})),a={id:e.join(",")};l(a).then((function(e){200===e.code?(t.$message.success(e.message),t.getData()):t.$message.error(e.message)}))})).catch((function(){}))},getData:function(){var e=this,t={page:this.page,size:this.pageSize},a={name:this.queryData.keyword,type:this.queryData.type};this.loading=!0,o(t,a).then((function(t){200===t.code?(e.loading=!1,e.tableData=t.data.content,e.total=t.data.totalElements):e.$message.error(t.message)}))},handleSelectionChange:function(e){this.multipleSelection=e,this.multipleSelection.length>0?this.selectShow=!0:this.selectShow=!1},viewPatient:function(e,t,a){this.$router.push({path:"/patientListDetail",query:{id:e.id}})},shareData:function(e){this.shartList=e?[e.id]:this.multipleSelection.map((function(e){return e.id})),this.$refs.shareModule.openDialog("patient")},enterSharedRecord:function(){this.$router.push({path:"/sharedRecord",query:{type:"patient"}})},uploadData:function(){this.$refs.uploadModule.openDialog()}}},h=p,m=(a("825a"),a("4023")),f=Object(m["a"])(h,i,s,!1,null,"92b949de",null);t["default"]=f.exports},"5f3e":function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Share to",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formData",attrs:{"label-position":"top",model:e.formData,"label-width":"80px"}},[a("h3",{staticClass:"color-main"},[e._v("\n        Please into the user name you want to share with\n      ")]),e._v(" "),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",[a("el-select",{staticClass:"w radius-input",attrs:{multiple:"",filterable:"",remote:"","reserve-keyword":"",placeholder:"Please enter","remote-method":e.remoteMethod,loading:e.loading},model:{value:e.formData.people,callback:function(t){e.$set(e.formData,"people",t)},expression:"formData.people"}},e._l(e.options,(function(e){return a("el-option",{key:e.id,attrs:{label:e.username,value:e.id}})})),1)],1)],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"mt-20"},[a("el-button",{attrs:{round:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.confirmBtn}},[e._v("Confirm")])],1)])],1)],1)},s=[],n=a("b775");function o(e){return Object(n["a"])({url:"api/users/get?name=".concat(e),method:"GET"})}function l(e){return Object(n["a"])({url:"api/patientList/sharePatientList",method:"POST",params:e})}function r(e){return Object(n["a"])({url:"api/phenoType/sharePhenoType",method:"POST",params:e})}var c={name:"",components:{},props:["shartList"],data:function(){return{loading:!1,shareType:"",formData:{people:[]},options:[],dialogVisible:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{remoteMethod:function(e){var t=this;""!==e?(this.loading=!0,o(e).then((function(e){200===e.code?(t.loading=!1,t.options=e.data.content):t.$message.error(e.message)}))):this.options=[]},confirmBtn:function(){var e=this;if(this.formData.people.length>0){var t=this.formData.people.map((function(e){return e})),a="phonetype"===this.shareType?{phenoTypeId:this.shartList.join(","),userId:t.join(",")}:{id:this.shartList.join(","),userId:t.join(",")},i="phonetype"===this.shareType?r:l;i(a).then((function(t){200===t.code?(e.$message.success(t.message),e.dialogVisible=!1):e.$message.error("Please select user")}))}else this.$message.error("Please select user")},openDialog:function(e){this.shareType=e,this.dialogVisible=!0,this.options=[],this.formData.people=[]}},filter:{}},u=c,d=a("4023"),p=Object(d["a"])(u,i,s,!1,null,"3335e9f9",null);t["a"]=p.exports},"70b5":function(e,t,a){},"825a":function(e,t,a){"use strict";var i=a("70b5"),s=a.n(i);s.a},f9ea:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"Upload",visible:e.dialogVisible,width:"50%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"formData",attrs:{"label-position":"top",model:e.formData,"label-width":"80px"}},[a("section",{directives:[{name:"show",rawName:"v-show",value:0===e.uploadIndex,expression:"uploadIndex === 0"}]},[e.uploadType?e._e():a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Patient list name",prop:"name",rules:{required:!0,message:"Please enter"}}},[a("el-input",{staticClass:"radius-input",attrs:{placeholder:"Please enter"},model:{value:e.formData.name,callback:function(t){e.$set(e.formData,"name",t)},expression:"formData.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"Patient list desc"}},[a("el-input",{staticClass:"radius-input",attrs:{placeholder:"Please enter"},model:{value:e.formData.desc,callback:function(t){e.$set(e.formData,"desc",t)},expression:"formData.desc"}})],1)],1)],1),e._v(" "),a("h3",{staticClass:"color-main"},[e._v("Select the type of text you upload")]),e._v(" "),a("el-row",{staticClass:"mt-30",attrs:{gutter:20}},[a("el-col",{attrs:{span:24}},[a("el-upload",{ref:"upload",staticClass:"upload-content",attrs:{accept:".csv","auto-upload":!1,drag:"",headers:e.headers,"on-success":e.uploadSuccess,"on-change":e.uploadChange,data:e.formData,"file-list":e.fileList,action:e.baseUrl+"/api/patientList/upload",multiple:""}},[a("svg",{staticClass:"icon f65 mt-40 mb-10",attrs:{"aria-hidden":"true"}},[a("use",{attrs:{"xlink:href":"#icon-A"}})]),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("\n                Drag the file here,or "),a("em",[e._v("click upload")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("\n                Only CVS files can be uploaded\n              ")])])],1)],1)],1)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("div",{staticClass:"mt-20"},[a("el-button",{attrs:{round:""},on:{click:function(t){e.dialogVisible=!1}}},[e._v("Cancel")]),e._v(" "),a("el-button",{attrs:{type:"primary",round:""},on:{click:e.confirmUpload}},[e._v("Confirm")])],1)])],1)],1)},s=[],n=a("4360"),o={name:"",components:{},props:{},data:function(){return{uploadType:!1,baseUrl:"/clampee",patientListId:this.$route.query.id,fileList:[],headers:{Authorization:"Bearer "+n["a"].getters.token},formData:{desc:"",name:"",patientListId:this.$route.query.id?this.$route.query.id:""},uploadIndex:0,formHeight:"500px",dialogVisible:!1}},computed:{},watch:{},created:function(){},mounted:function(){},methods:{confirmUpload:function(){var e=this;this.fileList.length>0?this.$refs["formData"].validate((function(t){if(!t)return!1;e.$refs.upload.submit()})):this.$message.warning("Please upload file.")},previousBtn:function(){this.uploadIndex=0},chooseUpload:function(){var e=this;this.$refs.formData.validate((function(t){if(!t)return!1;e.uploadIndex=1}))},uploadChange:function(e,t){this.fileList=t},uploadSuccess:function(e){200===e.code?(this.$message.success(e.message),this.dialogVisible=!1,this.uploadType?this.$emit("getDetailList"):this.$emit("getList")):this.$message.error(e.message)},openDialog:function(e){this.uploadType=e||!1,this.dialogVisible=!0,this.fileList=[],this.$refs.upload.clearFiles()}},filter:{}},l=o,r=a("4023"),c=Object(r["a"])(l,i,s,!1,null,null,null);t["a"]=c.exports}}]);
(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5539fe82"],{"259a":function(t,e,a){},"3e30":function(t,e,a){},4686:function(t,e,a){"use strict";a("ddb8")},"574d":function(t,e,a){t.exports={menuText:"#2b3067",menuActiveText:"#2b3067",subMenuActiveText:"#2b3067",menuBg:"#fff",menuHover:"#e3ebfe",subMenuBg:"#e3ebfe",subMenuHover:"#e3ebfe",sideBarWidth:"210px",mainColor:"#2b3067"}},"63ac":function(t,e,a){"use strict";(function(t){var i=a("52c1"),n=a("479d"),s=a("ab12"),o=a("f6a1"),l=a("2117"),r=a("7c98"),c=a.n(r);function h(t){return g(t)||f(t)||p(t)||u()}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function p(t,e){if(t){if("string"===typeof t)return d(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?d(t,e):void 0}}function f(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function g(t){if(Array.isArray(t))return d(t)}function d(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,i)}return a}function y(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){b(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}function b(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}e["a"]={name:"DatasourceFileShowMark",components:{DialogShowInfo:l["a"]},props:["id"],data:function(){return{type:"",showType:"xmi",loading:!1,noDataShow:!0,hasFinalized:1,entities:[],relations:[],entity_types:[],relation_types:[],sentence:null,token:null,typedef_entity_types:[],typedef_relation_types:[],_highLightTimeout:null,highLightDetail:{ids:0,label:"",text:"",assertion:"",umlsCui:"",umlsCuiDesc:""},typedef_entity_types_filter:[],typedef_entity_types_filter_copy:[],entitySearchKeyWord:"",relationSearchKeyWord:"",typedef_relation_types_filter:[],typedef_relation_types_filter_copy:[],entitySelection:"",entitySelectionId:null,relationSeletionId:null,data:null,relationLineCongfig:{},relationStartEntityId:null,relationEnd:null,waitingRelationEnd:!1,messageInstance:null,replaceEntityModalVisible:!1,entityReplaceRange:"only clicked",candidateEntityLabelsStr:"",disannotatePopoverVisible:!1,corpusConfig:{_entities:[],_relations:[],_entity_types:[],_relation_types:[],_sentence:{sentBratFile:{entities:[],relations:[]},sentBratSem:{}},_token:{},_typedef_entity_types:[],_typedef_relation_types:[],service:{},relationLineCongfig:{}}}},computed:y(y({},Object(i["d"])({allEntities:function(t){return t.projectEntities}})),Object(i["b"])(["sentenceRelations"])),watch:{corpusConfig:{handler:function(t){this.updateBrat()},deep:!0},waitingRelationEnd:function(t){t?this.messageInstance=this.$message({showClose:!1,message:"Relation-start selected, waiting for Relation-end...",type:"success",duration:0}):this.messageInstance.close()}},mounted:function(){this.messageInstance&&this.messageInstance.close(),this.waitingRelationEnd=!1,this.initData();window.onHightLightEntity=this.onHightLightEntity,window.onHightLightRelation=this.onHightLightRelation,window.unHighLight=this.unHighLight},destroyed:function(){t(document).off("click"),window.addRange=null,window.onEntitySelection=null,window.onHightLightEntity=null,window.onRelationSelection=null,window.onNewRelation=null,window.unHighLight=null},methods:y(y({},Object(i["c"])({setCorpusConfigAttr:"SET_CORPUSCONFIGATTR",setSentenceRelations:"SET_SENTENCERELATIONS"})),{},{initData:function(){this.type=this.$route.params.type},fetchData:function(t){var e=this,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];a?(this.noDataShow=!1,setTimeout((function(){var t=s["a"];if(e.$emit("set-nlp-data",t.data),e.loading=!1,200===t.code){var a=t.data;a?(e.$emit("success-data"),e.setBratData(a,!0)):e.$message.warning("数据为空")}setTimeout((function(){n["a"].$emit("set-analysis-loading-false")}),200)}),500)):(this.loading=!0,Object(o["a"])(t).then((function(t){if(e.$emit("set-nlp-data",t.data),e.loading=!1,e.noDataShow=!1,200===t.code){var a=t.data;a?(e.$emit("success-data"),e.setBratData(a,!0)):e.$message.warning("Empty Data.")}else e.$message.warning(t.message);n["a"].$emit("set-analysis-loading-false")})).catch((function(t){800008===t.code&&(e.$refs.dialogShowInfoRef.openDialog("nlp"),e.loading=!1,e.noDataShow=!0),e.noDataShow=!0,n["a"].$emit("set-analysis-loading-false"),e.loading=!1})))},setBratDataAgain:function(t){this.setBratData(t,!0)},setBratData:function(e,a){for(var i=this.corpusConfig.relationLineCongfig||{},n=0;n<e.typeDefXml.relation_types.length;n++){var s="#"+Math.random().toString(16).slice(-6),o=e.typeDefXml.relation_types[n].type;i[o]||(i[o]=s)}window.localStorage.setItem("relationLineCongfig",JSON.stringify(i)),this.analysisResult(e);var l={entity_types:this.entity_types,entity_attribute_types:[],relation_types:[],event_types:[]},r={text:this.text,entities:this.entities,attributes:[],relations:this.relations},c=!1,h=document.getElementById("markBrat");h&&(h.contentWindow.location.reload(!0),h.onload=function(){t("#markBrat")[0].contentWindow.readyToEmbed(l,r,c)})},analysisResult:function(t){var e=this,a=JSON.parse(t.bratFile),i=(a.entities,JSON.parse(t.bratSem)),n=[],s=[],o=JSON.parse(t.bratFile),l=JSON.parse(t.bratSem);this.text=a.text,this.entities=a.entities,this.relations=a.relations,this.entity_types=i.entity_types,this.relation_types=i.relation_types;l.entity_types.length&&l.entity_types[0].bgColor,this.sentence={sentBratFile:o,sentBratSem:l},this.token={tokenBratFile:n,tokenBratSem:s},this.typedef_entity_types=t.typeDefXml.entity_types,this.typedef_relation_types=t.typeDefXml.relation_types;var r=c.a.chain(this.entities).map((function(t){return t[1]})).uniq().value(),h=(c.a.chain(this.entity_types).map((function(t){if(-1!=c.a.indexOf(r,t.type))return t.selected=!0,t.items=[],c.a.chain(e.entities).map((function(e){e[1]==t.type&&(e.push(!0),t.items.push(e))})).value(),t})).compact().value(),c.a.chain(this.relations).map((function(t){return t[1]})).uniq().value()),u=[];c.a.map(h,(function(t){u.push({type:t})}));c.a.chain(u).map((function(t){return t.selected=!0,t.items=[],c.a.chain(e.relations).map((function(e){e[1]==t.type&&(e.push(!0),t.items.push(e))})).value(),t})).compact().value()},changeModeType:function(t){this.showType=t},preLabeling:function(){var t=this;this.loading=!0,this.$http.get("task/prelabel/".concat(this.$route.params.id),{},(function(e){t.loading=!1,e.success?t.$message.success(e.msg):t.commonUtil.showAlert(e.msg),t.loading=!1}))},onHightLightEntity:function(e,a,i){var n=this;this._highLightTimeout=setTimeout((function(){if(clearTimeout(n._highLightTimeout),n._highLightTimeout=null,n.highLightDetail.ids="",c.a.chain(n.entities).map((function(t){t[0]==e&&(n.highLightDetail.ids=e,n.highLightDetail.label=t[1],n.highLightDetail.text=t[3],n.highLightDetail.assertion=t[4],n.highLightDetail.umlsCui=t[5],n.highLightDetail.umlsCuiDesc=t[6])})).value(),""==n.highLightDetail.ids){var s=n.token.tokenBratFile.entities;c.a.chain(s).map((function(t){t[0]==e&&(n.highLightDetail.ids=e,n.highLightDetail.label=t[1],n.highLightDetail.text=t[3],n.highLightDetail.assertion="",n.highLightDetail.umlsCui="",n.highLightDetail.umlsCuiDesc="")})).value()}if(""==n.highLightDetail.ids){var o=n.sentence.sentBratFile.entities;c.a.chain(o).map((function(t){t[0]==e&&(n.highLightDetail.ids=e,n.highLightDetail.label=t[1],n.highLightDetail.text=t[3],n.highLightDetail.assertion="",n.highLightDetail.umlsCui="",n.highLightDetail.umlsCuiDesc="")})).value()}t(".highlight-content").css("left",a+"px").css("top",i+"px").show()}),1e3)},onHightLightRelation:function(e,a,i){var n=this;this._highLightTimeout=setTimeout((function(){if(clearTimeout(n._highLightTimeout),n._highLightTimeout=null,n.highLightDetail.ids="",c.a.chain(n.relations).map((function(t){t[0]==e&&(n.highLightDetail.ids=e,n.highLightDetail.label=t[1],n.highLightDetail.text=t[3])})).value(),""==n.highLightDetail.ids){var s=n.sentence.sentBratFile.relations;c.a.chain(s).map((function(t){t[0]==e&&(n.highLightDetail.ids=e,n.highLightDetail.label=t[1],n.highLightDetail.text=t[3])})).value()}t(".highlight-content").css("left",a+"px").css("top",i+"px").show()}),1e3)},unHighLight:function(e,a){this._highLightTimeout&&(clearTimeout(this._highLightTimeout),this._highLightTimeout=null),t(".highlight-content").hide()},addRange:function(e,a,i,n,s,o){switch(this._highLightTimeout&&(clearTimeout(this._highLightTimeout),this._highLightTimeout=null),this.entitySelection={start:n,end:s,spanText:o},this.typedef_entity_types_filter=this.typedef_entity_types,this.typedef_entity_types_filter_copy=h(this.typedef_entity_types),this.entitySearchKeyWord="",e){case"suggestSpanTypes":this.typedef_entity_types_filter.length>0&&t(".entity-lib").css("left",a+"px").css("top",i+"px").show();break}},entitySearchKeyWordChange:function(t){var e=this;this.typedef_entity_types_filter_copy=this.typedef_entity_types_filter.filter((function(t){return-1!=t.labelsStr.indexOf(e.entitySearchKeyWord)}))},relationSearchKeyWordChange:function(t){var e=this;this.typedef_relation_types_filter_copy=this.typedef_relation_types_filter.filter((function(t){return-1!=t.type.indexOf(e.relationSearchKeyWord)}))},selectEntity:function(t){},onEntitySelection:function(t,e,a){},confirmReplaceEntityInAllTasks:function(){},confirmReplaceEntity:function(){var t,e=this;if("only clicked"==this.entityReplaceRange?t="one":"in all of your tasks"==this.entityReplaceRange&&(t="all"),"all"===t)return this.$message.error("批量替换尚未实现");this.loading=!0,this.$http.get("task/update/entity/".concat(this.id,"/").concat(this.entitySelectionId,"/").concat(this.candidateEntityLabelsStr),{},(function(t){e.loading=!1,t.success?(e.replaceEntityModalVisible=!1,e.$message.success(t.msg),e.analysisResult(t.data),e.updateBrat()):e.$message.error(t.msg)}))},disannotateTheEntity:function(){},disannotateEntityInFile:function(){},disannotateEntityByCate:function(){},onNewRelation:function(t,e,a,i){},onRelationStartSelected:function(t){},onRelationModalClose:function(){},onRelationSelection:function(t,e,a){},selectRelation:function(t){},deleteRelation:function(t){},updateBrat:function(){var e=this.corpusConfig._entity_types,a=this.corpusConfig._entities,i=this.corpusConfig._relations,n=(this.corpusConfig._typedef_relation_types,this.corpusConfig._token),s=this.corpusConfig._sentence;if(!t.isEmptyObject(this.token)){var o=c.a.get(n,"tokenBratSem.entity_types[0]"),l=o||[],r=n.tokenBratFile.entities,h=s.sentBratSem.entity_types,u=s.sentBratFile.relations,p=s.sentBratFile.entities,f=[],g=[],d=[],m=[];e=e.concat(h),e=e.concat(l),c.a.chain(a).map((function(t){1==t[7]&&f.push(t)})).value(),c.a.chain(i).map((function(t){1==t[4]&&g.push(t)})).value(),c.a.chain(r).map((function(t){1==t[4]&&d.push(t)})).value(),c.a.chain(u).map((function(t){if(1==t[4]){m.push(t);var e=t[2][0][1],a=t[2][1][1];c.a.chain(p).map((function(t){t[0]!=e&&t[0]!=a||f.push(t)})).value()}})).value(),f=f.concat(d),g=g.concat(m);var y={entity_types:e,entity_attribute_types:[],relation_types:[],event_types:[]},b={text:this.text,entities:f,attributes:[],relations:g};y=JSON.parse(JSON.stringify(y)),b=JSON.parse(JSON.stringify(b));var _=t("#markBrat")[0]?t("#markBrat")[0].contentWindow.document.documentElement.scrollLeft:"",v=t("#markBrat")[0]?t("#markBrat")[0].contentWindow.document.documentElement.scrollTop:"";t("#markBrat")[0]&&t("#markBrat")[0].contentWindow.updateEmbed(y,b),setTimeout((function(){t("#markBrat")[0].contentWindow.scrollTo(_,v)}),50)}},showIssue:function(t,e){var a="";"entity"==e?a=this.entitySelectionId:"relation"==e&&(a=this.relationSeletionId),this.Bus.$emit("barVisible",{show:!0,tabName:"Issue",issueType:e,targetId:a})}})}}).call(this,a("c65b"))},"7f07":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t._m(0),t._v(" "),a("div",{staticClass:"vital-container realtime-top-content"},[a("nav",[a("el-row",{attrs:{type:"flex"}},[a("el-col",{attrs:{span:24}},[a("div",{staticClass:"f16 fb mt-5 color-main"},[t._v("Select NLP Pipeline:")]),t._v(" "),a("select-pipeline-split",{staticClass:"mt-15",staticStyle:{width:"600px"},attrs:{size:"small"},on:{"get-complete-data":t.getCompleteData,"get-complete-options":t.getCompleteOptions},model:{value:t.formData.pipeline,callback:function(e){t.$set(t.formData,"pipeline",e)},expression:"formData.pipeline"}})],1)],1)],1),t._v(" "),a("section",{staticClass:"mt-30"},[a("div",{staticClass:"color-main mt-15 mb-15 f16 fb"},[t._v("Input Text:")]),t._v(" "),a("div",{staticClass:"pr"},[a("el-input",{staticClass:"analysis-textarea",class:{"input-limit-container-error":t.inputLimit},attrs:{type:"textarea","show-word-limit":"",rows:8,placeholder:"Please enter"},nativeOn:{keydown:function(e){return t.onKeyupInput(e)},keyup:function(e){return t.onKeyupInput(e)},paste:function(e){return t.onPaste(e)}},model:{value:t.formData.text,callback:function(e){t.$set(t.formData,"text",e)},expression:"formData.text"}}),t._v(" "),a("span",{staticClass:"input-limit-container"},[t._v(t._s(t.formData.text.length)+"/4096")])],1),t._v(" "),a("p",[a("el-button",{attrs:{size:"small"},on:{click:t.clearData}},[t._v("Clear")]),t._v(" "),a("el-button",{attrs:{loading:t.analysisLoading,size:"small",disabled:t.inputLimit,type:"primary",icon:"iconfont icon-Analyze"},on:{click:function(e){return t.handleAnalysis(!1)}}},[t._v("\n          Analyze")])],1)])]),t._v(" "),a("div",{staticClass:"vital-container analysis-content"},[a("analysis-result",{ref:"analysisResultRef"})],1)])},n=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",{staticClass:"vital-container cb bb-1"},[a("strong",{staticClass:"fl f17 color-main"},[t._v("Real-Time Analysis")])])}],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",[a("el-row",[a("el-col",{attrs:{span:12}},[a("div",{staticClass:"color-main mt-15 f16 fb"},[t._v("Results")])]),t._v(" "),a("el-col",{attrs:{span:12,align:"right"}},[a("el-button",{staticClass:"mt-5 color-light-blue",attrs:{type:"text",disabled:t.generalDisabled,icon:"el-icon-s-tools"},on:{click:t.openSetting}},[t._v("Display Filter")])],1)],1)],1),t._v(" "),a("section",{staticClass:"analysis-result-content mt-15"},[a("show-mark",{ref:"showMarkRef",on:{"set-nlp-data":t.setNlpData,"success-data":function(e){t.generalDisabled=!1}}})],1),t._v(" "),a("entity-relation",{ref:"entityRelationref",staticClass:"mt-50"}),t._v(" "),a("el-dialog",{attrs:{title:"Select visible entities",center:"",visible:t.dialogVisible,width:"440px"},on:{"update:visible":function(e){t.dialogVisible=e},closed:t.closeDialog}},[a("div",{staticClass:"mt-20 mb-30",staticStyle:{padding:"0 10px 0 30px"}},[a("el-row",[a("el-col",{attrs:{span:12,align:"left"}},[a("strong",[t._v("ALL")])]),t._v(" "),a("el-col",{staticClass:"pr-20",attrs:{span:12,align:"right"}},[a("el-switch",{attrs:{"active-color":"#3688FF"},on:{change:t.handleSelectAll},model:{value:t.selectAll,callback:function(e){t.selectAll=e},expression:"selectAll"}})],1)],1),t._v(" "),a("el-scrollbar",{staticClass:"mt-5 visable-entities-container",staticStyle:{height:"380px",overflow:"visible","overflow-x":"hidden"}},[a("section",t._l(t.bratData,(function(e,i){return a("el-row",{key:i,staticClass:"mt-25"},[a("el-col",{attrs:{span:12,align:"left"}},[t._v("\n              "+t._s(e.type)+"\n            ")]),t._v(" "),a("el-col",{staticClass:"pr-20",attrs:{span:12,align:"right"}},[a("el-switch",{attrs:{"active-color":"#3688FF"},on:{change:t.handleSingle},model:{value:e.switch,callback:function(a){t.$set(e,"switch",a)},expression:"item.switch"}})],1)],1)})),1)]),t._v(" "),0===t.bratData.length?a("no-data"):t._e()],1),t._v(" "),0!==t.bratData.length?a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{size:"small"},on:{click:function(e){t.dialogVisible=!1}}},[t._v("Cancel")]),t._v(" "),a("el-button",{staticClass:"button-shadow",attrs:{size:"small",type:"primary"},on:{click:t.handleSetBrat}},[t._v("Confirm")])],1):t._e()])],1)},o=[],l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("nav",{staticClass:"mb-10 tr"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:9}},[a("el-input",{attrs:{size:"small",clearable:"",placeholder:"Search entities"},model:{value:t.tableSearchData,callback:function(e){t.tableSearchData=e},expression:"tableSearchData"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})])],1),t._v(" "),a("el-col",{attrs:{span:3}},[a("el-select",{attrs:{clearable:"",size:"small"},on:{change:t.handleChangeType},model:{value:t.dataType,callback:function(e){t.dataType=e},expression:"dataType"}},[a("el-option",{attrs:{label:"All",value:""}}),t._v(" "),t._l(t.typeOptions,(function(t,e){return a("el-option",{key:e,attrs:{label:t,value:t}})}))],2)],1),t._v(" "),a("el-col",{staticStyle:{"overflow-x":"auto"},attrs:{span:12}},[a("el-pagination",{attrs:{background:"","page-size":t.pageSize,"pager-count":5,"current-page":t.currentPage,"page-sizes":[5,10,20,50],layout:"sizes,prev, pager, next, total",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentPage}})],1)],1)],1),t._v(" "),a("el-table",{ref:"tableDataRef",staticClass:"relation-entity-table",staticStyle:{width:"100%","margin-bottom":"20px"},attrs:{data:t.tableData.slice((t.currentPage-1)*t.pageSize,t.currentPage*t.pageSize),"row-key":"dataId","tree-props":{children:"children"}}},[a("el-table-column",{attrs:{label:"Entity",width:"320","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",{staticClass:"relation-data"},[t._v(t._s(e.row.relationData||""))]),t._v("\n        "+t._s(e.row.dataName)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"Type",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("i",{staticClass:"mr-5 entity-type-round",style:t.setColor(e.row.semanticTag)}),t._v(t._s(e.row.semanticTag)+"\n      ")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"CUI"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n        "+t._s(t._f("emptyShow")(e.row.cui))+"\n      ")]}}])},[a("template",{slot:"header"},[a("span",{staticClass:"fl"},[t._v(" Code")]),t._v(" "),a("a",{staticClass:"ml-5",attrs:{href:"https://www.nlm.nih.gov/research/umls/new_users/online_learning/Meta_005.html",target:"_blank"}},[a("i",{staticClass:"mt-3 ml-10 el-icon-info color-main f18 fl"})])])],2)],1)],1)},r=[],c=a("ef87"),h=a("5c45"),u=h.v1,p={name:"",components:{},props:{},data:function(){return{bratData:[],relationsArr:[],bratFile:[],entitiesObj:{},bratText:"",tableData:[],copyTableData:[],pageSize:10,currentPage:1,total:0,tableSearchData:"",dataType:"",typeOptions:[]}},computed:{tableDataSlice:function(){var t=this,e=this.tableData.slice((this.currentPage-1)*this.pageSize,this.currentPage*this.pageSize);return this.typeOptions=Object(c["e"])(e.map((function(t){return t.semanticTag}))),e.filter((function(e){return!t.dataType||e.semanticTag===t.dataType}))}},watch:{tableSearchData:function(t){var e=this;this.currentPage=1;var a=this.copyTableData.filter((function(t){return!e.tableSearchData||t.dataName.toLowerCase().includes(e.tableSearchData.toLowerCase())})).filter((function(t){return!e.dataType||t.semanticTag===e.dataType}));this.tableData=a,this.total=a.length}},created:function(){},mounted:function(){},beforeDestroy:function(){},methods:{handleChangeType:function(){var t=this;this.currentPage=1;var e=this.copyTableData.filter((function(e){return!t.dataType||e.semanticTag===t.dataType})).filter((function(e){return!t.tableSearchData||e.dataName.toLowerCase().includes(t.tableSearchData.toLowerCase())}));this.tableData=e,this.total=e.length},handleSizeChange:function(t){this.pageSize=t,this.$refs.tableDataRef.bodyWrapper.scrollTop=0},handleCurrentPage:function(t){this.currentPage=t,this.$refs.tableDataRef.bodyWrapper.scrollTop=0},setDataEmpty:function(){this.tableData=[]},setData:function(t,e){var a=this;this.total=0,this.currentPage=1,this.tableData=[],this.tableSearchData="",this.dataType="";var i=JSON.parse(t.bratFile),n=JSON.parse(t.bratOut),s=JSON.parse(t.bratSem);if(this.bratText=i.text,e){var o=n.entities;for(var l in o)-1!==e.indexOf(o[l].semanticTag)&&delete o[l]}this.bratSem=s;var r=n.entities,h=n.relations,p=[];for(var f in r)r[f].keyName=f,r[f].dataId=u(),r[f].children=[],p.push(r[f]);var g=Object(c["b"])(p);h.map((function(t){g.map((function(e){t.fromEnt===e.keyName&&r[t.toEnt]&&(r[t.toEnt].dataId=u(),r[t.toEnt].relationData=t.semanticTag,e.children.push(r[t.toEnt]))}))})),g.map((function(t){t.dataName=a.findText(a.bratText,t.begin,t.end),t.children.length>0&&t.children.map((function(t){t.dataName=a.findText(a.bratText,t.begin,t.end)}))})),this.total=g.length,this.typeOptions=Object(c["e"])(g.map((function(t){return t.semanticTag}))),this.tableData=g,this.copyTableData=Object(c["b"])(g),this.$refs.tableDataRef.doLayout(),this.currentPage=1},setColor:function(t){var e={},a=this.bratSem.entity_types;return a.map((function(t){e[t.type]=t})),"background-color:".concat(e[t].bgColor)},findText:function(t,e,a){return t.substr(e,a-e)}}},f=p,g=(a("4686"),a("cba8")),d=Object(g["a"])(f,l,r,!1,null,null,null),m=d.exports,y=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticClass:"root-show-mark"},[t.noDataShow?a("no-data",{staticClass:"mt-70"}):t._e(),t._v(" "),t.noDataShow?t._e():a("div",{staticClass:"xmi-container"},[a("iframe",{attrs:{id:"markBrat","data-mode":"mark",width:"1300",height:"1600",name:"markBrat",src:"/static/main_shen.htm"}})]),t._v(" "),a("dialog-show-info",{ref:"dialogShowInfoRef"})],1)},b=[],_=a("63ac"),v=_["a"],D=(a("cb8a"),Object(g["a"])(v,y,b,!1,null,"3d11d842",null)),w=D.exports,S={name:"",components:{ShowMark:w,entityRelation:m},props:{},filter:{},data:function(){return{dialogVisible:!1,selectAll:!0,value:!1,generalDisabled:!0,bratSemData:[],bratFileData:[],originalBratData:{},originalBratDataAgain:{},bratData:[],tableData:[{name:"Disease (12)"},{name:"Determination (12)"}],copyBratData:[]}},computed:{},watch:{},created:function(){},mounted:function(){},activited:function(){},update:function(){},beforeRouteUpdate:function(){},methods:{handleSelectAll:function(t){this.bratData.map((function(e){e.switch=t}))},handleSingle:function(t){var e=this.bratData.map((function(t){return t.switch})),a=e.indexOf(!1);this.selectAll=-1===a},openFile:function(t){var e=this,a=t.target,i=new FileReader;i.onload=function(){if(i.result){var t=JSON.parse(i.result);e.$refs.showMarkRef.setBratDataAgain(t),e.$refs.testInput.value=""}},i.readAsText(a.files[0])},setNlpData:function(t){localStorage.bratData=JSON.stringify(t),this.originalBratData=Object(c["b"])(t),this.originalBratDataAgain=Object(c["b"])(t);var e=[];this.bratSemData=JSON.parse(t.bratSem),this.bratSemData.entity_types.map((function(t){e.push({type:t.type,switch:!0})})),this.bratData=e,this.$refs.entityRelationref.setData(t)},handleSetBrat:function(){var t=this;this.bratSemData=JSON.parse(this.originalBratDataAgain.bratSem),this.bratFileData=JSON.parse(this.originalBratDataAgain.bratFile),JSON.parse(this.originalBratData.bratSem).entity_types.map((function(e,a){t.bratData[a].switch||t.bratSemData.entity_types.splice(a,1)}));var e=[];this.bratData.map((function(t){t.switch||e.push(t.type)})),this.copyBratData=Object(c["b"])(this.bratData),this.bratFileData.entities.map((function(a,i){-1!==e.indexOf(a[1])&&delete t.bratFileData.entities[i]}));var a=[];this.bratFileData.entities.map((function(t){t&&a.push(t)})),this.bratFileData.entities=a,this.originalBratData.bratFile=JSON.stringify(this.bratFileData),this.$refs.showMarkRef.setBratDataAgain(this.originalBratData),this.$refs.entityRelationref.setData(this.originalBratData,e),this.dialogVisible=!1},getResult:function(t,e){this.generalDisabled=!0,this.$refs.entityRelationref.setDataEmpty(),this.$refs.showMarkRef.fetchData(t,e)},switchClick:function(){},openSetting:function(){this.dialogVisible=!0,this.selectAll=this.bratData.every((function(t){return t.switch}))},closeDialog:function(){this.copyBratData.length>0?this.bratData=Object(c["b"])(this.copyBratData):(this.bratData.map((function(t){t.switch=!0})),this.selectAll=!0)}}},C=S,T=(a("b0b1"),a("ae5d"),Object(g["a"])(C,s,o,!1,null,"52361f33",null)),x=T.exports,L=a("479d"),O=a("ab12"),k=a("ff52"),R={name:"",components:{analysisResult:x},props:{},filter:{},data:function(){return{analysisTypeOptions:[],pipelineLoading:!1,analysisLoading:!1,inputLimit:!1,selectPipeline:{},formData:{pipeline:"",text:O["b"]}}},computed:{},watch:{},created:function(){},mounted:function(){var t=this;this.handleAnalysis(!0),L["a"].$on("set-analysis-loading-false",(function(){t.analysisLoading=!1}))},activited:function(){},update:function(){},beforeRouteUpdate:function(){},methods:{onKeyupInput:function(){this.formData.text=this.formData.text.replace(/^\s/,""),this.formData.text.length>4096?(this.inputLimit=!0,k["a"].error("The length of your input text exceeds the limit of 4096. So it is truncated. Please use Batch Analysis or API to process the long notes.")):this.inputLimit=!1},onPaste:function(t){var e=t.clipboardData.getData("text");e.length>4096?(k["a"].error("You have reached the allowable character limit. Data has been truncated."),this.inputLimit=!0):this.inputLimit=!1},getCompleteOptions:function(t){var e=this,a=t.map((function(t){return t.version})).flat(1/0);this.$nextTick((function(){e.formData.pipeline=a[0].params,e.selectPipeline=a[0]}))},getCompleteData:function(t){this.selectPipeline=t},handleAnalysis:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.formData.text,a=this.selectPipeline.params;if(!a&&!t)return this.$message.warning("Please select pipeline."),!1;if(!e)return this.$message.warning("Input text is missing."),!1;var i={pipeline:a,text:e.trim(),frontFlag:!0};this.analysisLoading=!0,this.$refs.analysisResultRef.getResult(i,t)},clearData:function(){this.formData.text=""}}},B=R,E=(a("c171"),a("e4cc"),Object(g["a"])(B,i,n,!1,null,"1a70a462",null));e["default"]=E.exports},ae5d:function(t,e,a){"use strict";a("259a")},b0b1:function(t,e,a){"use strict";a("cbf6")},b94f:function(t,e,a){},c171:function(t,e,a){"use strict";a("b94f")},cb8a:function(t,e,a){"use strict";a("3e30")},cbf6:function(t,e,a){},ddb8:function(t,e,a){},e4cc:function(t,e,a){"use strict";a("574d")}}]);